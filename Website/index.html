<!DOCTYPE html>
<html>
  <head>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    
    <title>Home Server</title>
    
  </head>
  <body>
    <div id="registrations"></div>
    
    <script>
    var write_registrations = function(json){
        $("#registrations").empty()            
        var registrations = json["registrations"];
        
        $.each(registrations, function(listener_id,reg_data)
        {
            var action_options_dict = reg_data["options"];
            var action_options = ""
            $.each(action_options_dict, function(action_id, action_display_name){
                action_options += '<option value="'+action_id+'">'+action_display_name+'</option>'
            });
            
            $("#registrations").append($("<div>", {"class": "listener_name", "text" : reg_data["listener_display_name"]}));
            select = $("<select>", {"class": "action_id"}).append(action_options);
            select.val(reg_data["chosen_option"]);
            $("#registrations").append(select);
        })
        
    };
    
    var write_data = function(json){            
        write_registrations(json);
    };
    
    var update_data = function(){
        var baseUrl = "http://dexter:8080"
        var getDataUrl = baseUrl+"/get_data"
        $.getJSON(getDataUrl, write_data);
        
    }
    update_data()
    </script>
  </body>
</html>